schema: '2.0'
stages:
  download_kaggle:
    cmd: 'python -c "from src.download import download_kaggle; download_kaggle(exec_func=True)" '
    params:
      params.yaml:
        download_kaggle:
          dataset: datamunge/sign-language-mnist
    outs:
    - path: dataset
      md5: dce5ff47d2f83a726e773d58bc663eee.dir
      size: 210857086
      nfiles: 7
  DataPreprocessor:
    cmd: "python -c \"from src.process import DataPreprocessor; DataPreprocessor.load(name='DataPreprocessor').run_and_save()\"\
      \ "
    deps:
    - path: dataset
      md5: dce5ff47d2f83a726e773d58bc663eee.dir
      size: 210857086
      nfiles: 7
    params:
      params.yaml:
        DataPreprocessor:
          dataset: sign_mnist_train
    outs:
    - path: nodes/DataPreprocessor/outs.json
      md5: 91bf7e1e8916a86ada5cccd6cfe0acf1
      size: 233258189
  data_preprocess_test:
    cmd: "python3 -c \"from src.DataPreprocessor import DataPreprocessor; DataPreprocessor.load(name='data_preprocess_test').run_and_save()\"\
      \ "
    deps:
    - path: dataset
      md5: dce5ff47d2f83a726e773d58bc663eee.dir
      size: 210857086
      nfiles: 7
    - path: src/DataPreprocessor.py
      md5: 2d68eeed3da20f673103b5e45b217607
      size: 1610
    params:
      params.yaml:
        data_preprocess_test:
          dataset: sign_mnist_test
    outs:
    - path: nodes/data_preprocess_test/outs.json
      md5: 5eb9c135aeb36ebe84979901c29d648f
      size: 60933812
  MLModel:
    cmd: "python -c \"from src.train import MLModel; MLModel.load(name='MLModel').run_and_save()\"\
      \ "
    deps:
    - path: nodes/DataPreprocessor/outs.json
      md5: 91bf7e1e8916a86ada5cccd6cfe0acf1
      size: 233258180
    params:
      params.yaml:
        MLModel:
          dense:
          - 4
          epochs: 20
          filters:
          - 4
          optimizer: adam
    outs:
    - path: nodes/MLModel/metrics_no_cache.json
      md5: a23a182f556e37985fedd6e9b237f1b7
      size: 186
    - path: nodes/MLModel/model
      md5: b35fd431d749eb3ee4931efe72fd52a3.dir
      size: 158676
      nfiles: 4
    - path: nodes/MLModel/training_history.csv
      md5: a831f546a69e6e5f9e91efea478a7dc7
      size: 1640
  EvaluateModel:
    cmd: "python -c \"from src.evaluate import EvaluateModel; EvaluateModel.load(name='EvaluateModel').run_and_save()\"\
      \ "
    deps:
    - path: nodes/MLModel/metrics_no_cache.json
      md5: a23a182f556e37985fedd6e9b237f1b7
      size: 186
    - path: nodes/MLModel/model
      md5: b35fd431d749eb3ee4931efe72fd52a3.dir
      size: 158676
      nfiles: 4
    - path: nodes/MLModel/training_history.csv
      md5: a831f546a69e6e5f9e91efea478a7dc7
      size: 1640
    - path: nodes/test_data/outs.json
      md5: 5eb9c135aeb36ebe84979901c29d648f
      size: 60933821
    outs:
    - path: nodes/EvaluateModel/confusion_matrix.csv
      md5: 97b63f00f9c3e5d2b98575dc003840a8
      size: 74670
    - path: nodes/EvaluateModel/metrics_no_cache.json
      md5: b7efccebd02da8ca8f964d66cdb5e1ee
      size: 103
  test_data:
    cmd: "python -c \"from src.process import DataPreprocessor; DataPreprocessor.load(name='test_data').run_and_save()\"\
      \ "
    deps:
    - path: dataset
      md5: dce5ff47d2f83a726e773d58bc663eee.dir
      size: 210857086
      nfiles: 7
    params:
      params.yaml:
        test_data:
          dataset: sign_mnist_test
    outs:
    - path: nodes/test_data/outs.json
      md5: 5eb9c135aeb36ebe84979901c29d648f
      size: 60933821
